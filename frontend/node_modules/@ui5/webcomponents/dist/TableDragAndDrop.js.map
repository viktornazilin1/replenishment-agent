{"version":3,"file":"TableDragAndDrop.js","sourceRoot":"","sources":["../src/TableDragAndDrop.ts"],"names":[],"mappings":"AAAA,OAAO,YAAY,MAAM,+DAA+D,CAAC;AACzF,OAAO,EAAE,mBAAmB,EAAE,MAAM,sEAAsE,CAAC;AAC3G,OAAO,WAAW,MAAM,mDAAmD,CAAC;AAC5E,OAAO,cAAc,MAAM,iEAAiE,CAAC;AAC7F,OAAO,UAAU,MAAM,6DAA6D,CAAC;AACrF,OAAO,cAAc,MAAM,qBAAqB,CAAC;AAGjD,MAAM,CAAC,OAAO,OAAO,gBAAiB,SAAQ,cAAc;IAG3D,YAAY,KAAY;QACvB,KAAK,EAAE,CAAC;QACR,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;QACpB,YAAY,CAAC,SAAS,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,2BAA2B;IACjE,CAAC;IAED,YAAY,CAAC,CAAY;QACxB,CAAC,CAAC,cAAc,EAAE,CAAC;IACpB,CAAC;IAED,YAAY,CAAC,CAAY;QACxB,IAAI,CAAC,CAAC,aAAa,YAAY,IAAI,IAAI,IAAI,CAAC,MAAM,CAAC,UAAW,CAAC,QAAQ,CAAC,CAAC,CAAC,aAAa,CAAC,EAAE,CAAC;YAC1F,OAAO;QACR,CAAC;QAED,IAAI,CAAC,MAAM,CAAC,gBAAgB,CAAC,eAAe,GAAG,IAAI,CAAC;IACrD,CAAC;IAED,WAAW,CAAC,CAAY;QACvB,IAAI,CAAC,CAAC,CAAC,CAAC,MAAM,YAAY,WAAW,CAAC,EAAE,CAAC;YACxC,OAAO;QACR,CAAC;QAED,MAAM,eAAe,GAAG,mBAAmB,CAC1C,IAAI,CAAC,MAAM,CAAC,IAAI,EAChB,CAAC,CAAC,OAAO,EACT,WAAW,CAAC,QAAQ,CACpB,CAAC;QAEF,IAAI,CAAC,eAAe,EAAE,CAAC;YACtB,IAAI,CAAC,MAAM,CAAC,gBAAgB,CAAC,eAAe,GAAG,IAAI,CAAC;YACpD,OAAO;QACR,CAAC;QAED,MAAM,EAAE,eAAe,EAAE,SAAS,EAAE,GAAG,cAAc,CAAC,CAAC,EAAE,IAAI,CAAC,MAAM,EAAE,eAAe,EAAE,eAAe,CAAC,OAAO,EAAE,EAAE,QAAQ,EAAE,IAAI,EAAE,aAAa,EAAE,IAAI,EAAE,CAAC,CAAC;QACzJ,IAAI,CAAC,MAAM,CAAC,gBAAgB,CAAC,eAAe,GAAG,eAAe,CAAC;QAC/D,IAAI,CAAC,MAAM,CAAC,gBAAgB,CAAC,SAAS,GAAG,SAAS,CAAC;IACpD,CAAC;IAED,OAAO,CAAC,CAAY;QACnB,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,gBAAgB,EAAE,eAAe,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,gBAAgB,EAAE,SAAS,EAAE,CAAC;YAChG,OAAO;QACR,CAAC;QAED,UAAU,CAAC,CAAC,EAAE,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,MAAM,CAAC,gBAAgB,CAAC,eAAe,EAAE,IAAI,CAAC,MAAM,CAAC,gBAAgB,CAAC,SAAS,CAAC,CAAC;QACjH,IAAI,CAAC,MAAM,CAAC,gBAAgB,CAAC,eAAe,GAAG,IAAI,CAAC;IACrD,CAAC;CACD","sourcesContent":["import DragRegistry from \"@ui5/webcomponents-base/dist/util/dragAndDrop/DragRegistry.js\";\nimport { findClosestPosition } from \"@ui5/webcomponents-base/dist/util/dragAndDrop/findClosestPosition.js\";\nimport Orientation from \"@ui5/webcomponents-base/dist/types/Orientation.js\";\nimport handleDragOver from \"@ui5/webcomponents-base/dist/util/dragAndDrop/handleDragOver.js\";\nimport handleDrop from \"@ui5/webcomponents-base/dist/util/dragAndDrop/handleDrop.js\";\nimport TableExtension from \"./TableExtension.js\";\nimport type Table from \"./Table.js\";\n\nexport default class TableDragAndDrop extends TableExtension {\n\t_table: Table;\n\n\tconstructor(table: Table) {\n\t\tsuper();\n\t\tthis._table = table;\n\t\tDragRegistry.subscribe(this._table); // TODO: Where unsubscribe?\n\t}\n\n\t_ondragenter(e: DragEvent) {\n\t\te.preventDefault();\n\t}\n\n\t_ondragleave(e: DragEvent) {\n\t\tif (e.relatedTarget instanceof Node && this._table.shadowRoot!.contains(e.relatedTarget)) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._table.dropIndicatorDOM.targetReference = null;\n\t}\n\n\t_ondragover(e: DragEvent) {\n\t\tif (!(e.target instanceof HTMLElement)) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst closestPosition = findClosestPosition(\n\t\t\tthis._table.rows,\n\t\t\te.clientY,\n\t\t\tOrientation.Vertical,\n\t\t);\n\n\t\tif (!closestPosition) {\n\t\t\tthis._table.dropIndicatorDOM.targetReference = null;\n\t\t\treturn;\n\t\t}\n\n\t\tconst { targetReference, placement } = handleDragOver(e, this._table, closestPosition, closestPosition.element, { crossDnD: true, originalEvent: true });\n\t\tthis._table.dropIndicatorDOM.targetReference = targetReference;\n\t\tthis._table.dropIndicatorDOM.placement = placement;\n\t}\n\n\t_ondrop(e: DragEvent) {\n\t\tif (!this._table.dropIndicatorDOM?.targetReference || !this._table.dropIndicatorDOM?.placement) {\n\t\t\treturn;\n\t\t}\n\n\t\thandleDrop(e, this._table, this._table.dropIndicatorDOM.targetReference, this._table.dropIndicatorDOM.placement);\n\t\tthis._table.dropIndicatorDOM.targetReference = null;\n\t}\n}\n"]}