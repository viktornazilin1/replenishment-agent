{"version":3,"file":"jsx-utils.js","sourceRoot":"","sources":["../src/jsx-utils.ts"],"names":[],"mappings":"AACA,OAAO,QAAQ,MAAM,oBAAoB,CAAC;AAC1C,OAAO,EAAE,iBAAiB,EAAE,MAAM,wBAAwB,CAAC;AAE3D,SAAS,mBAAmB,CAAC,IAAuB,EAAE,KAA0B,EAAE,GAAW;IAC5F,MAAM,MAAM,GAAG,IAAI,CAAC,WAAW,EAAE,CAAC,SAAS,EAAE,CAAC;IAE9C,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE;QACjC,IAAI,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,EAAE,CAAC;YAC3B,+FAA+F;YAC/F,MAAM,WAAW,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;YAC5C,MAAM,cAAc,GAAG,iBAAiB,CAAC,WAAW,CAAC,CAAC;YACtD,gCAAgC;YAChC,MAAM,cAAc,GAAG,WAAW,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,WAAW,EAAE,GAAG,WAAW,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;YAElF,IAAI,SAA6B,CAAC;YAClC,IAAI,cAAc,IAAI,MAAM,EAAE,CAAC;gBAC9B,SAAS,GAAG,cAAc,CAAC;YAC5B,CAAC;iBAAM,IAAI,cAAc,IAAI,MAAM,EAAE,CAAC;gBACrC,SAAS,GAAG,cAAc,CAAC;YAC5B,CAAC;YACD,wCAAwC;YACxC,IAAI,SAAS,EAAE,CAAC;gBACf,IAAI,CAAC,IAAI,KAAK,SAAS,CAAC,EAAE,CAAC;oBAC1B,KAAK,CAAC,SAAS,SAAS,EAAE,CAAC,GAAG,KAAK,CAAC,IAAI,CAAC,CAAC;oBAC1C,uEAAuE;oBACvE,OAAO,KAAK,CAAC,IAAI,CAAC,CAAC;gBACpB,CAAC;YACF,CAAC;QACF,CAAC;IACF,CAAC,CAAC,CAAC;AACJ,CAAC;AAED,MAAM,UAAU,iBAAiB,CAAC,IAAgC;IACjE,OAAO,OAAO,IAAI,KAAK,UAAU,IAAI,aAAa,IAAI,IAAI,CAAC;AAC5D,CAAC;AAED,MAAM,UAAU,UAAU,CAAC,IAAgC,EAAE,KAA0B,EAAE,GAAW;IACnG,IAAI,GAAW,CAAC;IAChB,IAAI,iBAAiB,CAAC,IAAI,CAAC,EAAE,CAAC;QAC7B,GAAG,GAAG,IAAI,CAAC,WAAW,EAAE,CAAC,MAAM,EAAE,CAAC;QAClC,mBAAmB,CAAC,IAAI,EAAE,KAAK,EAAE,GAAG,CAAC,CAAC;IACvC,CAAC;SAAM,CAAC;QACP,GAAG,GAAG,IAAI,CAAC;IACZ,CAAC;IAED,iCAAiC;IACjC,IAAI,OAAO,KAAK,CAAC,KAAK,KAAK,QAAQ,EAAE,CAAC;QACrC,KAAK,CAAC,KAAK,GAAG,QAAQ,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;IACrC,CAAC;IAED,OAAO,GAAG,CAAC;AACZ,CAAC","sourcesContent":["import type UI5Element from \"./UI5Element.js\";\nimport hash2str from \"./util/hash2str.js\";\nimport { pascalToKebabCase } from \"./util/StringHelper.js\";\n\nfunction convertEventScoping(type: typeof UI5Element, props: Record<string, any>, key: string) {\n\tconst events = type.getMetadata().getEvents();\n\n\tObject.keys(props).forEach(prop => {\n\t\tif (prop.startsWith(\"on\")) {\n\t\t\t// Exteract the kebab-case event: onChange - change, onSelectionChange - selection-change, etc.\n\t\t\tconst pascalEvent = prop.slice(\"on\".length);\n\t\t\tconst kebabCaseEvent = pascalToKebabCase(pascalEvent);\n\t\t\t// Also support camelCase events\n\t\t\tconst camelCaseEvent = pascalEvent.charAt(0).toLowerCase() + pascalEvent.slice(1);\n\n\t\t\tlet origEvent: string | undefined;\n\t\t\tif (kebabCaseEvent in events) {\n\t\t\t\torigEvent = kebabCaseEvent;\n\t\t\t} else if (camelCaseEvent in events) {\n\t\t\t\torigEvent = camelCaseEvent;\n\t\t\t}\n\t\t\t// Attach for the \"ui5-\" preffixed event\n\t\t\tif (origEvent) {\n\t\t\t\tif ((prop !== \"onClick\")) {\n\t\t\t\t\tprops[`onui5-${origEvent}`] = props[prop];\n\t\t\t\t\t// TODO keep native events for now, find a way to mark them for runtime\n\t\t\t\t\tdelete props[prop];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n}\n\nexport function isUI5ElementClass(type: string | typeof UI5Element): type is typeof UI5Element {\n\treturn typeof type === \"function\" && \"getMetadata\" in type;\n}\n\nexport function preprocess(type: string | typeof UI5Element, props: Record<string, any>, key: string) {\n\tlet tag: string;\n\tif (isUI5ElementClass(type)) {\n\t\ttag = type.getMetadata().getTag();\n\t\tconvertEventScoping(type, props, key);\n\t} else {\n\t\ttag = type;\n\t}\n\n\t// convert class object to string\n\tif (typeof props.class === \"object\") {\n\t\tprops.class = hash2str(props.class);\n\t}\n\n\treturn tag;\n}\n"]}